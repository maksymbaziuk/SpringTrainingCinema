<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
 		http://www.springframework.org/schema/beans
 		http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>config/in-memory-data-files.properties</value>
        </property>
    </bean>

    <bean id="auditoriumDAO" class="com.baziuk.spring.auditorium.dao.AuditoriumInMemoryDAO" init-method="initWithData">
        <property name="dataPopulator">
            <bean class="com.baziuk.spring.data.JSONDataPopulator">
                <property name="dataFile" value="${auditorium.initial.data.file}"/>
            </bean>
        </property>
    </bean>

    <bean id="userDAO" class="com.baziuk.spring.user.dao.UserInMemoryDAO" init-method="initWithData" depends-on="bookingDAO">
        <property name="dataPopulator">
            <bean class="com.baziuk.spring.user.data.UserJSONDataPopulator">
                <property name="dataFile" value="${user.initial.data.file}"/>
                <property name="bookingDAO" ref="bookingDAO"/>
            </bean>
        </property>
    </bean>

    <bean id="eventDAO" class="com.baziuk.spring.events.dao.EventInMemoryDAO" init-method="initWithData" depends-on="auditoriumDAO">
        <property name="dataPopulator">
            <bean class="com.baziuk.spring.events.data.EventJSONDataPopulator">
                <property name="dataFile" value="${event.initial.data.file}"/>
                <property name="auditoriumDAO" ref="auditoriumDAO"/>
            </bean>
        </property>
    </bean>

    <bean id="bookingDAO" class="com.baziuk.spring.booking.dao.BookingInMemoryDAO" init-method="initWithData" depends-on="eventDAO">
        <property name="dataPopulator">
            <bean class="com.baziuk.spring.booking.data.TicketJSONDataPopulator">
                <property name="dataFile" value="${booking.initial.data.file}"/>
                <property name="eventDAO" ref="eventDAO"/>
            </bean>
        </property>
    </bean>
</beans>